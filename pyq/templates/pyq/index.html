<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user_login.username }}</title>
</head>
<body>
<h1>{{ user_login.username }}</h1>

<form action="{% url 'pyq:post_add' user_login.id %}" method='post' enctype="multipart/form-data">
    {% csrf_token %}
    <div>
        <textarea name="context" placeholder="What do you want to post?"></textarea>
    </div>
    <div class="form-group col-md-4">
        <input type="submit" value="submit"/>
    </div>
</form>

<div>
    <div id="post_list_item">
        {% for post in posts %}
            <div>
            <h4>{{ post.user_now }}:{{ post.context }}</h4>
            <p>created:{{ post.created_time }} edited:{{ post.edit_time }}</p>
            <table>
            <tr>
            <td>
            {% if post.user_now == user_login %}
                <form action="{% url 'pyq:post_edit' user_login.id post.pid %}" method="post">
                {% csrf_token %}

                    <input type="submit" value="edit" />
                    <!--
                    <button name="context" onclick="return EditPromptFunc()">Edit</button>
                    <script>
                        function EditPromptFunc()
                        {
                            var context = prompt("What do u want to edit?", "hello");
                            //return confirm("what do u?")

                            if (context != null)
                                return context;
                            else return false;
                        }
                    </script>
                    -->
                </form>
            {% endif %}
            </td>
            <td>
            {% if post.user_now == user_login or user_login.permission %}
                <form action="{% url 'pyq:post_delete' user_login.id post.pid %}" method="post">
                {% csrf_token %}
                    <!--
                    <input type="submit" value="delete" />
                    -->
                    <button onclick="return DeleteConfirmFunc()">Delete</button>
                    <script>
                        function DeleteConfirmFunc()
                        {
                            return confirm("Are u sure to DELETE?");
                        }
                    </script>
                </form>
            {% endif %}
            </td>
            </tr>
            </table>
            </div>
        {% endfor %}
    </div>
</div>

</body>
</html>